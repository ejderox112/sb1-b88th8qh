# ngrok.yml - Agent configuration with OAuth traffic policy
# Replace YOUR_TOKEN_HERE with your ngrok authtoken if you want to store it here.
# For free accounts, omit the `url` field to use an auto-generated domain.

version: "2"
authtoken: YOUR_TOKEN_HERE

endpoints:
  - name: cli-8080
    # url: example-8080.ngrok-free.app  # optional (paid/custom domains)
    traffic_policy:
      on_http_request:
        - actions:
            - type: oauth
              config:
                provider: google
    upstream:
      url: 8080
      protocol: http1

  - name: cli-8081
    # url: example-8081.ngrok-free.app
    traffic_policy:
      on_http_request:
        - actions:
            - type: oauth
              config:
                provider: google
    upstream:
      url: 8081
      protocol: http1

  - name: cli-8082
    # url: example-8082.ngrok-free.app
    traffic_policy:
      on_http_request:
        - actions:
            - type: oauth
              config:
                provider: google
    upstream:
      url: 8082
      protocol: http1
